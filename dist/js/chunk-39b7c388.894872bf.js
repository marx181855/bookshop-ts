(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39b7c388"],{7345:function(t,e,c){"use strict";c("874f")},"874f":function(t,e,c){},f4ba:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a=Object(n["P"])("data-v-c9ba4698");Object(n["A"])("data-v-c9ba4698");var o={class:"category-container"},r={class:"search-bar"},i={id:"mainbox"},u={class:"order-tab"},l={class:"goodslist better-scroll-wrapper"},s={class:"content better-scroll-content"},d={class:"tip-text"},b=Object(n["j"])("p",null,"暂时没有商品哦.......",-1);Object(n["y"])();var g=a((function(t,e,c,g,p,j){var f=Object(n["E"])("van-search"),O=Object(n["E"])("van-tab"),v=Object(n["E"])("van-tabs"),h=Object(n["E"])("van-sidebar-item"),m=Object(n["E"])("van-collapse-item"),y=Object(n["E"])("van-collapse"),T=Object(n["E"])("van-sidebar"),k=Object(n["E"])("van-card"),C=Object(n["E"])("BackTop");return Object(n["x"])(),Object(n["g"])("div",o,[Object(n["j"])("div",r,[Object(n["j"])(f,{modelValue:t.searchKeyword,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.searchKeyword=e}),"show-action":"",label:"书籍",placeholder:"请输入搜索关键词",background:"#42b983","input-align":"center",shape:"round",clearable:"",onClear:t.clearSearchInputContent,"clear-trigger":"always"},{action:a((function(){return[Object(n["j"])("div",{onClick:e[1]||(e[1]=function(){return t.onSearch&&t.onSearch.apply(t,arguments)})},"搜索")]})),_:1},8,["modelValue","onClear"])]),Object(n["j"])("div",i,[Object(n["j"])("div",u,[Object(n["j"])(v,{active:t.currentActiveTab,"onUpdate:active":e[3]||(e[3]=function(e){return t.currentActiveTab=e}),onClick:t.switchTab},{default:a((function(){return[(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(t.tabTypes,(function(t,e,c){return Object(n["x"])(),Object(n["g"])(O,{title:t,key:c,name:e},null,8,["title","name"])})),128))]})),_:1},8,["active","onClick"])]),Object(n["j"])(T,{class:"leftmenu",modelValue:t.currentActiveSidebar,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.currentActiveSidebar=e})},{default:a((function(){return[Object(n["j"])(y,{modelValue:t.currentActiveCollapse,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.currentActiveCollapse=e}),accordion:""},{default:a((function(){return[(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(t.categoryList,(function(e,c){return Object(n["x"])(),Object(n["g"])(m,{key:c,title:e.name,name:e.name},{default:a((function(){return[(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(e.children,(function(e){return Object(n["x"])(),Object(n["g"])(h,{key:e.id,title:e.name,onClick:function(c){return t.getCategoryGoodsList(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"]),Object(n["j"])("div",l,[Object(n["j"])("div",s,[(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(t.goodsList,(function(e){return Object(n["x"])(),Object(n["g"])(k,{onClick:function(c){return t.$router.push({path:"/goodDetail",query:{id:e.id}})},key:e.id,num:e.comments_count,tag:e.comments_count>=0?"流行":"标签",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])]),Object(n["O"])(Object(n["j"])("div",d,[b],512),[[n["L"],!t.goodsList.length]])]),Object(n["O"])(Object(n["j"])(C,{onBackToTopClick:t.backToTop},null,8,["onBackToTopClick"]),[[n["L"],t.isShowBackToTopIcon]])])})),p=c("5530"),j=c("2909"),f=c("1da1"),O=(c("96cf"),c("229e")),v=c("0d3b"),h=c("616b"),m=c("626a"),y=c("6a2a"),T=(c("99af"),c("dbe5"));function k(){return Object(T["a"])({url:"/api/goods"})}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(T["a"])({url:"/api/goods?category_id=".concat(e,"&page=").concat(c,"&").concat(t,"=1")})}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sales",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(T["a"])({url:"/api/goods?category_id=".concat(c,"&page=").concat(n,"&").concat(e,"=1&title=").concat(t)})}O["a"].use(v["a"]).use(h["a"]);var _=Object(n["k"])({components:{BackTop:y["a"]},setup:function(){var t,e=Object(n["B"])({searchKeyword:"",tabTypes:{sales:"销量排序",price:"价格排序",comments_count:"评论排序"},currentActiveTab:"sales",currentActiveSidebar:0,currentActiveCollapse:0,currentCategoryId:0,categoryList:[],goodsData:{sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}},isShowBackToTopIcon:!1}),c=function(t,e){var c=null;return function(){var n=!c;n&&t(),c&&clearTimeout(c),c=setTimeout((function(){c=null}),e)}},a=c((function(){e.searchKeyword.value,w(e.searchKeyword.value,e.currentActiveTab).then((function(t){e.goodsData[e.currentActiveTab].list=t.state.goodsData.data}))}),2e3),o=function(){},r=Object(n["e"])((function(){return e.goodsData[e.currentActiveTab].list})),i=function(){C("sales",e.currentCategoryId).then((function(t){e.goodsData.sales.list=t.goods.data})),C("price",e.currentCategoryId).then((function(t){e.goodsData.price.list=t.goods.data})),C("comments_count",e.currentCategoryId).then((function(t){e.goodsData.comments_count.list=t.goods.data})),k().then((function(t){e.categoryList=t.categories}))},u=function(){t=new O["a"](".better-scroll-wrapper",{probeType:3,click:!0,pullUpLoad:!0,mouseWheel:{speed:20,invert:!1,easeTime:300}}),t.on("scroll",(function(t){e.isShowBackToTopIcon=-t>300})),t.on("pullingUp",l)},l=function(){var c=Object(f["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:n=e.goodsData[e.currentActiveTab].page+1,C(e.currentActiveTab,e.currentCategoryId,n).then((function(t){var c;(c=e.goodsData[e.currentActiveTab].list).push.apply(c,Object(j["a"])(t.goods.data)),e.goodsData[e.currentActiveTab].page+=1})),t.finishPullUp(),t.refresh();case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();Object(n["v"])((function(){m["a"].loading({message:"加载中...",forbidClick:!0}),i(),u(),m["a"].clear()}));var s=function(){Object(n["q"])((function(){t&&t.refresh()}))},d=function(c){e.currentCategoryId=c,C("sales",e.currentCategoryId).then((function(t){e.goodsData.sales.list=t.goods.data})),C("price",e.currentCategoryId).then((function(t){e.goodsData.price.list=t.goods.data})),C("comments_count",e.currentCategoryId).then((function(t){e.goodsData.comments_count.list=t.goods.data})),Object(n["q"])((function(){t&&t.refresh()}))},b=function(){t.scrollTo(0,0,500)};return Object(p["a"])(Object(p["a"])({},Object(n["J"])(e)),{},{onSearch:a,clearSearchInputContent:o,switchTab:s,getCategoryGoodsList:d,goodsList:r,backToTop:b})}});c("7345");_.render=g,_.__scopeId="data-v-c9ba4698";e["default"]=_}}]);